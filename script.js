// translations
const translations = {
  cs: {
    navHome: "Domů",
    navAbout: "O nás",
    navGallery: "Galerie",
    navServices: "Vybavení",
    navContact: "Kontakt",
    btnBook: "Rezervace",
    heroBadge: "Fotografie s duší",
    heroTitle: "Foť. Tvoř.<br>Užívej si výsledek",
    heroSubtitle: "Studio pro stylové záběry, obsah a vaše velmi důležité příběhy ღ . Naše nabídky: 1 hodina - 1000 Kč, 2 hodiny - 1800 Kč, 3 hodiny - 2600 Kč",
    btnBookNow: "Vytvořit rezervaci",
    btnGallery: "Prohlédnout galerii",
    scrollText: "Scroll",
    aboutLabel: "O nás",
    aboutTitle: "Vítejte v ateliéru Aura",
    aboutText1: "Aura je stylový fotoateliér s jedinečnou atmosférou a pečlivě navrženými interiéry. Místo, kde se pohodlí setkává s estetikou a každý záběr získává charakter.",
    aboutText2: "Nabízíme několik tematických zón — od světlé ložnice pro romantické a rodinné focení, přes dětský koutek plný detailů, až po barevná pozadí a klasickou bílou scénu pro fashion a komerční projekty..",
    aboutText3: "Ateliér Aura je ideální jak pro profesionální fotografy, tak pro ty, kteří stojí před objektivem poprvé. Flexibilní prostor a příjemná atmosféra vám pomohou cítit se přirozeně a užít si focení naplno.",
    feature1: "Profesionální technika",
    feature2: "Příjemná atmosféra",
    feature3: "Flexibilní hodiny",
    galleryLabel: "Naše práce",
    galleryTitle: "Galerie",
    gallerySubtitle: "Každý snímek má svůj příběh a emoci",
    galleryPortrait: "Portrét",
    galleryFamily: "Rodina",
    galleryCreative: "Kreativní",
    galleryCommercial: "Komerční",
    galleryLifestyle: "Lifestyle",
    servicesLabel: "Co nabízíme",
    servicesTitle: "Vybavení & Služby",
    service1Title: "Profesionální osvětlení",
    service1Desc: "Studio světla, softboxy, reflektory a veškeré příslušenství pro dokonalé nasvícení.",
    service2Title: "Různé pozadí",
    service2Desc: "Papírové i látkové pozadí v různých barvách pro každý typ focení.",
    service3Title: "Rekvizity",
    service3Desc: "Křesla, stoličky, dekorační předměty a další rekvizity pro kreativní focení.",
    service4Title: "Wi-Fi & Zázemí",
    service4Desc: "Vysokorychlostní internet, šatna a pohodlné zázemí pro váš komfort.",
    contactLabel: "Kontakt",
    contactTitle: "Napište nám",
    contactText: "Máte otázky nebo chcete rezervovat termín? Neváhejte nás kontaktovat.",
    contactAddress: "Czech Republic",
    formName: "Jméno",
    formEmail: "Email",
    formMessage: "Zpráva",
    formSend: "Odeslat zprávu",
    footerText: "© 2026 Aura__photostudio_. Všechna práva vyhrazena.",
    modalTitle: "Nová rezervace",
    modalSubtitle: "Vyplňte formulář a my se vám ozveme",
    modalDate: "Datum",
    modalTime: "Čas",
    modalName: "Jméno a příjmení",
    modalContact: "Kontakt (telefon nebo email)",
    modalType: "Nabídky",
    modalNotes: "Poznámky",
    modalSubmit: "Odeslat rezervaci",
    selectType: "Pomozte mi vybrat",
    typePortrait: "1 hodina - 1000 Kč",
    typeFamily: "2 hodiny - 1800 Kč",
    typeCouple: "3 hodiny - 2600 Kč",
  },
  ru: {
    navHome: "Главная",
    navAbout: "О нас",
    navGallery: "Галерея",
    navServices: "Оборудование",
    navContact: "Контакты",
    btnBook: "Бронирование",
    heroBadge: "Фотография с душой",
    heroTitle: "Снимай. Создавай.<br>Наслаждайся результатом.",
    heroSubtitle: "Студия для стильных кадров, контента и ваших важных историй.     Наши предложения - 1 час - 1000 Kč, 2 часа - 1800 Kč, 3 часа - 2600 Kč",
    btnBookNow: "Создать бронирование",
    btnGallery: "Смотреть галерею",
    scrollText: "Вниз",
    aboutLabel: "О нас",
    aboutTitle: "Добро пожаловать в студию Aura",
    aboutText1: "Aura — это стильная фотостудия с уникальной атмосферой и тщательно продуманными интерьерами. Место, где комфорт встречается с эстетикой, а каждый кадр приобретает характер.",
    aboutText2: "Мы предлагаем несколько тематических зон — от светлой спальни для романтических и семейных съёмок, через детский уголок, наполненный деталями, до цветных фонов и классической белой сцены для fashion и коммерческих проектов.",
    aboutText3: "Фотостудия Aura идеально подходит как для профессиональных фотографов, так и для тех, кто впервые становится перед объективом. Гибкое пространство и приятная атмосфера помогут вам чувствовать себя естественно и получить настоящее удовольствие от съёмки.",
    feature1: "Профессиональная техника",
    feature2: "Приятная атмосфера",
    feature3: "Гибкие часы",
    galleryLabel: "Наши работы",
    galleryTitle: "Галерея",
    gallerySubtitle: "Каждый снимок имеет свою историю и эмоцию",
    galleryPortrait: "Портрет",
    galleryFamily: "Семья",
    galleryCreative: "Креатив",
    galleryCommercial: "Коммерческая",
    galleryLifestyle: "Лайфстайл",
    servicesLabel: "Что мы предлагаем",
    servicesTitle: "Оборудование и Услуги",
    service1Title: "Профессиональное освещение",
    service1Desc: "Студийный свет, софтбоксы, рефлекторы и все необходимое для идеального освещения.",
    service2Title: "Различные фоны",
    service2Desc: "Бумажные и тканевые фоны разных цветов для каждого типа съемки.",
    service3Title: "Реквизит",
    service3Desc: "Кресла, табуреты, декоративные предметы и другой реквизит для креативной съемки.",
    service4Title: "Wi-Fi и Удобства",
    service4Desc: "Высокоскоростной интернет, раздевалка и комфортные удобства для вашего комфорта.",
    contactLabel: "Контакты",
    contactTitle: "Напишите нам",
    contactText: "Есть вопросы или хотите забронировать время? Не стесняйтесь связаться с нами.",
    contactAddress: "Чехия",
    formName: "Имя",
    formEmail: "Email",
    formMessage: "Сообщение",
    formSend: "Отправить сообщение",
    footerText: "© 2026 Aura__photostudio_. Все права защищены.",
    modalTitle: "Новое бронирование",
    modalSubtitle: "Заполните форму и мы свяжемся с вами",
    modalDate: "Дата",
    modalTime: "Время",
    modalName: "Имя и фамилия",
    modalContact: "Контакт (телефон или email)",
    modalType: "Предложения",
    modalNotes: "Примечания",
    modalSubmit: "Отправить бронирование",
    selectType: "Предложения",
    typePortrait: "1 час - 1000 Kč",
    typeFamily: "2 часа - 1800 Kč",
    typeCouple: "3 часа - 2600 Kč",
  },
  ua: {
    navHome: "Головна",
    navAbout: "Про нас",
    navGallery: "Галерея",
    navServices: "Обладнання",
    navContact: "Контакти",
    btnBook: "Бронювання",
    heroBadge: "Фотографія з душею",
    heroTitle: "Знімай. Створюй.<br>Насолоджуйся результатом. ",
    heroSubtitle: "Студія для стильних кадрів, контенту та ваших важливих історій.     Наші Пропозиції - 1 година - 1000 Kč , 2 години - 1800 Kč , 3 години - 2600 Kč",
    btnBookNow: "Створити бронювання",
    btnGallery: "Переглянути галерею",
    scrollText: "Вниз",
    aboutLabel: "Про нас",
    aboutTitle: "Ласкаво просимо до студії Aura",
    aboutText1: "Aura — це стильна фотостудія з унікальною атмосферою та ретельно продуманими інтер’єрами. Місце, де комфорт зустрічається з естетикою, а кожен кадр набуває характеру.",
    aboutText2: "Ми пропонуємо кілька тематичних зон — від світлої спальні для романтичних і сімейних зйомок, через дитячий куточок, наповнений деталями, до кольорових фонів і класичної білої сцени для fashion та комерційних проєктів.",
    aboutText3: "Фотостудія Aura ідеально підходить як для професійних фотографів, так і для тих, хто вперше стає перед об’єктивом. Гнучкий простір і приємна атмосфера допоможуть вам почуватися природно та отримати справжнє задоволення від зйомки.",
    feature1: "Професійна техніка",
    feature2: "Приємна атмосфера",
    feature3: "Гнучкі години",
    galleryLabel: "Наші роботи",
    galleryTitle: "Галерея",
    gallerySubtitle: "Кожен знімок має свою історію та емоцію",
    galleryPortrait: "Портрет",
    galleryFamily: "Сім'я",
    galleryCreative: "Креатив",
    galleryCommercial: "Комерційна",
    galleryLifestyle: "Лайфстайл",
    servicesLabel: "Що ми пропонуємо",
    servicesTitle: "Обладнання та Послуги",
    service1Title: "Професійне освітлення",
    service1Desc: "Студійне світло, софтбокси, рефлектори та все необхідне для ідеального освітлення.",
    service2Title: "Різні фони",
    service2Desc: "Паперові та тканинні фони різних кольорів для кожного типу зйомки.",
    service3Title: "Реквізит",
    service3Desc: "Крісла, табурети, декоративні предмети та інший реквізит для креативної зйомки.",
    service4Title: "Wi-Fi та Зручності",
    service4Desc: "Високошвидкісний інтернет, роздягальня та комфортні зручності для вашого комфорту.",
    contactLabel: "Контакти",
    contactTitle: "Напишіть нам",
    contactText: "Є питання або хочете забронювати час? Не соромтеся зв'язатися з нами.",
    contactAddress: "Чехія",
    formName: "Ім'я",
    formEmail: "Email",
    formMessage: "Повідомлення",
    formSend: "Надіслати повідомлення",
    footerText: "© 2026 Aura__photostudio_. Всі права захищені.",
    modalTitle: "Нове бронювання",
    modalSubtitle: "Заповніть форму і ми зв'яжемося з вами",
    modalDate: "Дата",
    modalTime: "Час",
    modalName: "Ім'я та прізвище",
    modalContact: "Контакт (телефон або email)",
    modalType: "Пропозиції",
    modalNotes: "Примітки",
    modalSubmit: "Надіслати бронювання",
    selectType: "Оберіть тип",
    typePortrait: "1 година - 1000 Kč",
    typeFamily: "2 години - 1800 Kč",
    typeCouple: "3 години - 2600 Kč",
},
};
let currentLang = localStorage.getItem('aura_lang') || 'cs';


const navbar = document.getElementById('navbar');
const mobileToggle = document.getElementById('mobileToggle');
const navMenu = document.getElementById('navMenu');
const bookingModal = document.getElementById('bookingModal');
const openBookingBtn = document.getElementById('openBooking');
const heroBookBtn = document.getElementById('heroBookBtn');
const closeModalBtn = document.getElementById('closeModal');
const bookingDate = document.getElementById('bookingDate');
const formLanguage = document.getElementById('formLanguage');

// Initialize 
document.addEventListener('DOMContentLoaded', () => {

  changeLanguage(currentLang);
  
  // Initialize event listeners
  initEventListeners();
  
  // Initialize scroll effects
  initScrollEffects();
  
  // Initialize animations
  initAnimations();
  
  // Set minimum date for booking
  if (bookingDate) {
    const today = new Date().toISOString().split('T')[0];
    bookingDate.min = today;
  }
});

//Language Switcher 
function changeLanguage(lang) {
  if (!translations[lang]) return;
  
  currentLang = lang;
  localStorage.setItem('aura_lang', lang);
  
  //Update HTML lang attribute
  document.documentElement.lang = lang;
  
  //Update active language button
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.classList.remove('active');
    if (btn.dataset.lang === lang) {
      btn.classList.add('active');
    }
  });
  
  //Update all translatable elements
  document.querySelectorAll('[data-key]').forEach(el => {
    const key = el.dataset.key;
    if (translations[lang][key]) {
      if (key === 'heroTitle') {
        el.innerHTML = translations[lang][key];
      } else {
        el.textContent = translations[lang][key];
      }
    }
  });
  
  //Update form language field
  if (formLanguage) {
    formLanguage.value = lang;
  }
  
  //Update select options
  updateSelectOptions(lang);
}

function updateSelectOptions(lang) {
  const photoTypeSelect = document.querySelector('select[name="photo_type"]');
  if (photoTypeSelect) {
    const options = photoTypeSelect.querySelectorAll('option');
    options.forEach(option => {
      const key = option.getAttribute('data-key');
      if (key && translations[lang][key]) {
        option.textContent = translations[lang][key];
      }
    });
  }
}

//Event Listeners
function initEventListeners() {
  //Language buttons
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      const lang = e.target.dataset.lang;
      changeLanguage(lang);
      
      // Add click animation
      btn.style.transform = 'scale(0.95)';
      setTimeout(() => {
        btn.style.transform = '';
      }, 150);
    });
  });
  
  //Mobile menu toggle
  if (mobileToggle) {
    mobileToggle.addEventListener('click', () => {
      navMenu.classList.toggle('active');
      mobileToggle.classList.toggle('active');
    });
  }
  
  //Close mobile menu on link click
  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', () => {
      navMenu.classList.remove('active');
      mobileToggle.classList.remove('active');
    });
  });
  
  //Modal open/close
  if (openBookingBtn) {
    openBookingBtn.addEventListener('click', openModal);
  }
  
  if (heroBookBtn) {
    heroBookBtn.addEventListener('click', openModal);
  }
  
  if (closeModalBtn) {
    closeModalBtn.addEventListener('click', closeModal);
  }
  
  //Close modal on outside click
  if (bookingModal) {
    bookingModal.addEventListener('click', (e) => {
      if (e.target === bookingModal) {
        closeModal();
      }
    });
  }
  
  //Close modal on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && bookingModal.classList.contains('active')) {
      closeModal();
    }
  });
  
  //Form submissions
  document.querySelectorAll('form').forEach(form => {
    form.addEventListener('submit', handleFormSubmit);
  });
}

//Modal Functions 
function openModal() {
  if (bookingModal) {
    bookingModal.classList.add('active');
    document.body.style.overflow = 'hidden';
    
    //Update form language
    if (formLanguage) {
      formLanguage.value = currentLang;
    }
  }
}

function closeModal() {
  if (bookingModal) {
    bookingModal.classList.remove('active');
    document.body.style.overflow = '';
  }
}

//Form Submit Handler 
async function handleFormSubmit(e) {
  e.preventDefault();
  const form = e.target;
  const submitBtn = form.querySelector('button[type="submit"]');
  const originalText = submitBtn.innerHTML;
  
  //Show loading state
  submitBtn.disabled = true;
  const loadingTexts = {
    cs: 'Odesílání...',
    ru: 'Отправка...',
    ua: 'Надсилання...'
  };
  submitBtn.innerHTML = `<span>${loadingTexts[currentLang]}</span><i class="fas fa-spinner fa-spin"></i>`;
  
  try {
    const formData = new FormData(form);
    const response = await fetch(form.action, {
      method: 'POST',
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    });
    
    if (response.ok) {
      const successMessages = {
        cs: '✅ Děkujeme! Vaše zpráva byla úspěšně odeslána. Brzy se vám ozveme.',
        ru: '✅ Спасибо! Ваше сообщение успешно отправлено. Мы скоро свяжемся с вами.',
        ua: '✅ Дякуємо! Ваше повідомлення успішно надіслано. Ми скоро зв\'яжемося з вами.'
      };
      alert(successMessages[currentLang]);
      form.reset();
      if (form.classList.contains('booking-form')) {
        closeModal();
      }
    } else {
      throw new Error('Form submission failed');
    }
  } catch (error) {
    console.error('Form error:', error);
    const errorMessages = {
      cs: '❌ Chyba při odesílání. Zkuste to prosím znovu.',
      ru: '❌ Ошибка при отправке. Пожалуйста, попробуйте снова.',
      ua: '❌ Помилка при надсиланні. Будь ласка, спробуйте ще раз.'
    };
    alert(errorMessages[currentLang]);
  } finally {
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
  }
}

//Scroll Effects
function initScrollEffects() {
  //Navbar scroll effect
  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      navbar.classList.add('scrolled');
    } else {
      navbar.classList.remove('scrolled');
    }
  });
  
  //Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const offset = navbar.offsetHeight + 20;
        const targetPosition = target.offsetTop - offset;
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });
}

//Animations
function initAnimations() {
  //Intersection Observer for reveal animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('active');
      }
    });
  }, observerOptions);
  
  // observer
  document.querySelectorAll('section').forEach(section => {
    section.classList.add('reveal');
    observer.observe(section);
  });
  
  //gallery items stagger animation
  const galleryItems = document.querySelectorAll('.gallery-item');
  galleryItems.forEach((item, index) => {
    item.style.animationDelay = `${index * 0.1}s`;
  });
  
  //service cards stagger animation
  const serviceCards = document.querySelectorAll('.service-card');
  serviceCards.forEach((card, index) => {
    card.style.animationDelay = `${index * 0.1}s`;
  });
}

//parallax Effect
window.addEventListener('scroll', () => {
  const scrolled = window.pageYOffset;
  const parallaxElements = document.querySelectorAll('.hero-bg img');
  
  parallaxElements.forEach(el => {
    const speed = 0.5;
    el.style.transform = `translateY(${scrolled * speed}px)`;
  });
});

//gallery Lightbox
document.querySelectorAll('.gallery-item').forEach(item => {
  item.addEventListener('click', () => {
    const img = item.querySelector('img');
    if (img) {
      //create lightbox
      const lightbox = document.createElement('div');
      lightbox.className = 'lightbox';
      lightbox.innerHTML = `
        <div class="lightbox-overlay"></div>
        <img src="${img.src}" alt="${img.alt}">
        <button class="lightbox-close"><i class="fas fa-times"></i></button>
      `;
      document.body.appendChild(lightbox);
      document.body.style.overflow = 'hidden';
      
      //close lightbox
      lightbox.addEventListener('click', (e) => {
        if (e.target !== lightbox.querySelector('img')) {
          lightbox.remove();
          document.body.style.overflow = '';
        }
      });
    }
  });
});

//add lightbox styles dynamically
const lightboxStyles = document.createElement('style');
lightboxStyles.textContent = `
  .lightbox {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 3000;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s;
  }
  .lightbox-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
  }
  .lightbox img {
    position: relative;
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
    border-radius: 12px;
    animation: scaleIn 0.3s;
  }
  .lightbox-close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    z-index: 1;
  }
  .lightbox-close:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes scaleIn {
    from { transform: scale(0.9); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
`;
document.head.appendChild(lightboxStyles);
